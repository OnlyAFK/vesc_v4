/**
 * @file    current_loop.h
 * @brief   电流环控制器 (兼容层)
 * @note    此文件保留用于向后兼容，新代码请使用 pid.h 和 foc_core.h
 */

#ifndef __CURRENT_LOOP_H_
#define __CURRENT_LOOP_H_

#include "pid.h"

/*============================================================================*/
/*                    兼容旧代码的类型定义                                      */
/*============================================================================*/

/* 旧版 PI 控制器结构体 - 映射到新版 */
typedef PID_Controller_t PI_Controller_t;

/* 为兼容定义 PID_t 别名 */
typedef PID_Controller_t PID_t;

/*============================================================================*/
/*                    兼容旧代码的全局变量                                      */
/*============================================================================*/

extern PI_Controller_t pid_id;
extern PI_Controller_t pid_iq;

/*============================================================================*/
/*                    兼容旧代码的函数                                          */
/*============================================================================*/

/**
 * @brief  初始化电流环 PI 控制器 (兼容接口)
 */
void current_pi_init(void);

/**
 * @brief  电流环计算 (兼容接口)
 * @param  pPI: PI 控制器指针
 */
void current_calc(PI_Controller_t *pPI);

#endif /* __CURRENT_LOOP_H_ */
